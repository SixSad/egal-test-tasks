version: "3.6"

services:

  rabbitmq:
    extends:
      file: ./deploy/docker-compose.yml
      service: rabbitmq
    ports:
      - ${RABBITMQ_PORT:-5672}:5672
      - ${RABBITMQ_MANAGER_PORT:-15672}:15672

  web-service:
    extends:
      file: ./deploy/docker-compose.yml
      service: web-service
    ports:
      - ${WEB_SERVICE_PORT:-80}:8080

  database:
    extends:
      file: ./deploy/docker-compose.yml
      service: database
    ports:
      - ${RABBITMQ_PORT:-5432}:5432

  auth-service:
    extends:
      file: ./deploy/docker-compose.yml
      service: auth-service
    build:
      context: auth-service
    volumes:
      - ./auth-service:/app

  core-service:
    extends:
      file: ./deploy/docker-compose.yml
      service: core-service
    build:
      context: core-service
    volumes:
      - ./core-service:/app

#  pgadmin:
#    extends:
#      file: ./deploy/docker-compose.yml
#      service: pgadmin
#

  adminer:
    extends:
      file: ./deploy/docker-compose.yml
      service: adminer
